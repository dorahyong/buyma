
# W컨셉 이미지 url 수집

## 모델명 검색 후 상품 리스트 화면
- 검색색 keyword 는 ace_products 테이블의 model_no 
- 상품 리스트 화면이 나오고, 첫 번째 상품을 클릭해서 썸네일 이미지를 수집

### url 
Request URL
https://display.wconcept.co.kr/search?keyword=754443&type=direct
Request Method
GET
Status Code
200 OK
Remote Address
43.200.223.119:443
Referrer Policy
strict-origin-when-cross-origin

### Requests header
:authority
display.wconcept.co.kr
:method
GET
:path
/search?keyword=754443&type=direct
:scheme
https
accept
text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7
accept-encoding
gzip, deflate, br, zstd
accept-language
ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7
cookie
wckDisplayMktSID=ymrYwLyylvwcQeRvLwkYVF2sCvwY9mD%2Fbvx82F6rlEA90GSvljWk2TvbBZUZvHpM; adfrom=SA_google_pc_mall; channel_id=SA_google_pc_mall; _fbp=fb.2.1768735195615.970111431447086875; _gcl_gs=2.1.k1$i1768735191$u100721172; airbridge_migration_metadata__wconcept=%7B%22version%22%3A%221.11.1%22%7D; ab180ClientId=ae194f72-2fcd-46a5-968e-f3647b57efcc; _gcl_au=1.1.156882023.1768735199; _fwb=179j0Zy7mhCyBi6RyCIpmXZ.1768735199583; _wp_uid=1-363bb5ba746c1a4e984037cf058837e4-s1760937601.796339|windows_10|chrome-189cgm6; cto_bundle=4F_al19wdWJCNWRyZzlpNiUyRmZaQWx5aFlMV0I5RWdVeiUyQmtTNzZBTDFCTHU5d2ZIUXFxMEFkYWtnb0xMTWJ1TmNtQlNVd2xYRGIzSktVRmJHOFFSVGJUVHpZUyUyQlFQNDN6RWdqcTEycSUyQnQ4cyUyQlc5aWRYSlNkVHJoOE4yVUdGUXZTMVA0bjM2NElidVJDb0NSdlB3YXZsa1EwcmxRJTNEJTNE; afUserId=c5b24d2b-f54f-4da0-94fd-1cb7e5a33777-p; AF_SYNC=1768735200718; ab.storage.deviceId.65fe4688-7456-4173-99bd-7715541b6e88=%7B%22g%22%3A%22edeb9dd0-a81c-04c7-add4-63d0cd215f91%22%2C%22c%22%3A1768735237293%2C%22l%22%3A1768735237293%7D; wckRecentKeyword=NESSA566-001%2CNESSA566%2CCJ1611-060%2CDZ3217-100%2CDZ3217%2CDQ6377-208%2CDQ6377%2CAJPFM07411%2CDC7485-436%2C754443; LastKwd=754443; WCKSessionID=CfDJ8Kwm-N6mTIJKoRK0f9xD4UeC27adeY8aRDMDfp01l_E7ZJkA-0LOtbxtEu3Rp4vgyxMGA2Ua9KzX2X7uUO9mvxsftlwpfLzYrFWKRt1fuRbwvEVIMA-sJgT0JMU-uDzi3w; BasketCnt=0; custno=0; custid=Guest; GoOnShopping=%2FProduct%2F307698365%3Fmcd%3DM33439436%26amp%3Bca%3D273%26amp%3Bitemcd%3D307698365; .WConceptSESSION=CfDJ8Kwm%2BN6mTIJKoRK0f9xD4UcyWUJ33YYlTWcau0LaDVqpdQRGeNkPkEOMlXCOZ3ziUzDtS7sy7fdvOKFXpRwhNo4OGiAVrnb8U9NngF6QC0%2FX0dE%2BfjQfk79Zh7PMIa6c6OZbsS7u0ZJrPqWgjmaG%2F6LfzNW474nb%2BLfspLoMTEdb; wckRP=307698365; wckRPImage=https://product-image.wconcept.co.kr/productimg/image/img9/65/307698365_GG10848.jpg; _fwb=199F3oZQq840ljKAmhdGDZU.1768735386093; _BS_GUUID=VZPsHF0aOCLaH96Ps66T5rGHzfciTHSOGIgonhyb; _TRK_AUIDA_13816=813cd415f9c0170c0e71d0a0e024546a:1; _TRK_ASID_13816=408989ecb9cbc30c99d68f5123ad50f5; _gid=GA1.3.805572859.1768735387; _dc_gtm_UA-60389187-1=1; _gat_UA-60389187-1=1; _ga_SHT495PT17=GS2.3.s1768735386$o1$g1$t1768735386$j60$l0$h0; ab.storage.sessionId.65fe4688-7456-4173-99bd-7715541b6e88=%7B%22g%22%3A%22257c52ca-c42a-524d-7357-2c99a0eda02f%22%2C%22e%22%3A1768737195063%2C%22c%22%3A1768735214470%2C%22l%22%3A1768735395063%7D; _gcl_aw=GCL.1768735395.Cj0KCQiAprLLBhCMARIsAEDhdPeEsiVVy3CGuyQHJQtxJz6wRwXIfwYPVWuXeeLkTtPILa639DpNKwoaAkqoEALw_wcB; _ga=GA1.1.712953429.1768735196; _ga_Y8Q5KT4ZWS=GS2.1.s1768735195$o1$g1$t1768735395$j47$l0$h0; wcs_bt=s_4f42d3095f05:1768735395; airbridge_session__wconcept=%7B%22id%22%3A%22d833cfe3-9474-4839-97a4-911e4a8b783a%22%2C%22timeout%22%3A1800000%2C%22start%22%3A1768735199351%2C%22end%22%3A1768735395701%7D; _dd_s=rum=0&expire=1768736309525
priority
u=0, i
sec-ch-ua
"Google Chrome";v="143", "Chromium";v="143", "Not A(Brand";v="24"
sec-ch-ua-mobile
?0
sec-ch-ua-platform
"Windows"
sec-fetch-dest
document
sec-fetch-mode
navigate
sec-fetch-site
none
sec-fetch-user
?1
upgrade-insecure-requests
1
user-agent
Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36

### payload
keyword=754443&type=direct

### response html
검색 상품 있는 경우 : file wconcept_search.html
검색 상품 없는 경우 : file wconcept_search_no.html

### response html 중 하나의 상품 예시 
<div class="sc-jpuob9-8 iMBqZp product-item item type-all"><button class="sc-16sqvmz-0 hajYLp btn sc-jpuob9-7 ertTIN area-img" type="button"><span class="sc-jpuob9-1 fvyKEu"><span class="sc-1oykv4u-0 crIesh img dim-blckTrns003" width="100%" height="100%"><span style="box-sizing: border-box; display: block; overflow: hidden; width: initial; height: initial; background: none; opacity: 1; border: 0px; margin: 0px; padding: 0px; position: relative;"><span style="box-sizing: border-box; display: block; width: initial; height: initial; background: none; opacity: 1; border: 0px; margin: 0px; padding: 100% 0px 0px;"></span><img alt="가방 - 보테가베네타(BOTTEGA VENETA) - 25FW 보테가베네타 WALLACE 윌리스 미니 숄더백 754443V3IV18425 BLACK DOM" src="https://product-image.wconcept.co.kr/productimg/image/img9/65/307698365_GG10848.jpg?RS=412" decoding="async" data-nimg="responsive" class="sc-1oykv4u-1 fYhUVM" style="position: absolute; inset: 0px; box-sizing: border-box; padding: 0px; border: none; margin: auto; display: block; width: 0px; height: 0px; min-width: 100%; max-width: 100%; min-height: 100%; max-height: 100%;"><noscript></noscript></span></span></span></button><span class="sc-jpuob9-6 eTKxOG area-info"><button class="sc-16sqvmz-0 hajYLp btn sc-jpuob9-7 ertTIN area-click" type="button"><span class="sc-jpuob9-2 Ulfbn prdc-title"><span class="sc-tdjdw3-0 frpBAf text title">보테가베네타</span><span class="sc-tdjdw3-0 frpBAf text detail">25FW 보테가베네타 WALLACE 윌리스 미니 숄더백 754443V3IV18425 BLACK DOM</span></span><span class="sc-jpuob9-3 fjERKg prdc-price"><span class="sc-tdjdw3-0 frpBAf text customer-price">3,709,000</span><span class="sc-tdjdw3-0 frpBAf text final-discount"><em>2<span>%</span></em></span><span class="sc-tdjdw3-0 frpBAf text final-price"><strong>3,600,520</strong></span></span><span class="sc-jpuob9-4 ecgytM stats"><span class="like"><svg viewBox="0 0 10 10" fill="none" xmlns="http://www.w3.org/2000/svg" class="sc-17dt15x-6 jOAOJ"><path d="M9.03 1.504a2.507 2.507 0 0 0-3.547 0L5 1.987l-.483-.483A2.508 2.508 0 0 0 .97 5.05l.483.483L5 9.081l3.547-3.547.483-.483a2.507 2.507 0 0 0 0-3.547Z" fill="#999"></path></svg><span class="sc-tdjdw3-0 frpBAf text cnt">9</span></span></span><span class="sc-jpuob9-5 ecTpOZ area-tag"><span class="sc-11u47nj-0 ckxkt tag"><span>쿠폰</span></span></span></button><a href="#none" class="sc-16sqvmz-0 hajYLp btn md sc-19nzjr4-0 iszdEI like-pick" aria-label="찜 하기"><svg viewBox="0 0 16 14" fill="none" xmlns="http://www.w3.org/2000/svg" class="sc-17dt15x-4 evyjyZ"><path d="M13.709 2.041a3.551 3.551 0 0 0-5.025 0L8 2.726l-.685-.685a3.553 3.553 0 1 0-5.024 5.025l.684.684L8 12.775l5.024-5.025.685-.684a3.554 3.554 0 0 0 0-5.025Z" stroke="#BBB" stroke-width="1.002" stroke-linecap="square"></path></svg></a></span></div>


## 하나의 상품 클릭 후 상세 화면에서 이미지 추출하기

### url
Request URL
https://www.wconcept.co.kr/Product/307698365?entry_channel=search&search_menu=direct&rccode=pc_search
Request Method
GET
Status Code
200 OK
Remote Address
43.202.206.178:443
Referrer Policy
strict-origin-when-cross-origin

### request header
cache-control
no-cache, no-store

content-encoding
gzip
content-type
text/html; charset=utf-8
date
Sun, 18 Jan 2026 12:37:45 GMT
pragma
no-cache
server
Kestrel
set-cookie
AWSALB=Z8MERK4Sqps8stWs/XzWTMsRrHKoklTPBlkRuda6WKUjO3Is7ZGSc7wIkWzOrrUTDYv5W4TwpXZTxzscBs+fZnSBc48NI/sFQMABOgHDTkt4HArdjfkphpQuW2uN; Expires=Sun, 25 Jan 2026 12:37:45 GMT; Path=/
set-cookie
AWSALBCORS=Z8MERK4Sqps8stWs/XzWTMsRrHKoklTPBlkRuda6WKUjO3Is7ZGSc7wIkWzOrrUTDYv5W4TwpXZTxzscBs+fZnSBc48NI/sFQMABOgHDTkt4HArdjfkphpQuW2uN; Expires=Sun, 25 Jan 2026 12:37:45 GMT; Path=/; SameSite=None; Secure
set-cookie
GoOnShopping=%2FProduct%2F307698365%3Fmcd%3DM33439436%26amp%3Bca%3D273%26amp%3Bitemcd%3D307698365; domain=.wconcept.co.kr; path=/
strict-transport-security
max-age=2592000; includeSubDomains; preload
vary
Accept-Encoding
x-powered-by
ASP.NET
:authority
www.wconcept.co.kr
:method
GET
:path
/Product/307698365?entry_channel=search&search_menu=direct&rccode=pc_search
:scheme
https
accept
text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7
accept-encoding
gzip, deflate, br, zstd
accept-language
ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7
cache-control
max-age=0
cookie
wckDisplayMktSID=ymrYwLyylvwcQeRvLwkYVF2sCvwY9mD%2Fbvx82F6rlEA90GSvljWk2TvbBZUZvHpM; channel_id=SA_google_pc_mall; _fbp=fb.2.1768735195615.970111431447086875; _gcl_gs=2.1.k1$i1768735191$u100721172; airbridge_migration_metadata__wconcept=%7B%22version%22%3A%221.11.1%22%7D; ab180ClientId=ae194f72-2fcd-46a5-968e-f3647b57efcc; _gcl_au=1.1.156882023.1768735199; _wp_uid=1-363bb5ba746c1a4e984037cf058837e4-s1760937601.796339|windows_10|chrome-189cgm6; cto_bundle=4F_al19wdWJCNWRyZzlpNiUyRmZaQWx5aFlMV0I5RWdVeiUyQmtTNzZBTDFCTHU5d2ZIUXFxMEFkYWtnb0xMTWJ1TmNtQlNVd2xYRGIzSktVRmJHOFFSVGJUVHpZUyUyQlFQNDN6RWdqcTEycSUyQnQ4cyUyQlc5aWRYSlNkVHJoOE4yVUdGUXZTMVA0bjM2NElidVJDb0NSdlB3YXZsa1EwcmxRJTNEJTNE; afUserId=c5b24d2b-f54f-4da0-94fd-1cb7e5a33777-p; AF_SYNC=1768735200718; wckRecentKeyword=NESSA566-001%2CNESSA566%2CCJ1611-060%2CDZ3217-100%2CDZ3217%2CDQ6377-208%2CDQ6377%2CAJPFM07411%2CDC7485-436%2C754443; LastKwd=754443; BasketCnt=0; custno=0; custid=Guest; GoOnShopping=%2FProduct%2F307698365%3Fmcd%3DM33439436%26amp%3Bca%3D273%26amp%3Bitemcd%3D307698365; .AspNetCore.Antiforgery.Hq8yyUr0830=CfDJ8Kwm-N6mTIJKoRK0f9xD4Uf2kA2Z6l04xyt8BjANOsHArHdHr3zivIYrgCkKipd0KuIJx-kGgUd7B0-smfzZEheLdtmLmGwYuSM9LHFkWrj1nri07cuCmsn6eakZGLSXpkmIHiipzZDqe0wM5LYW21w; .WConceptSESSION=CfDJ8Kwm%2BN6mTIJKoRK0f9xD4UcyWUJ33YYlTWcau0LaDVqpdQRGeNkPkEOMlXCOZ3ziUzDtS7sy7fdvOKFXpRwhNo4OGiAVrnb8U9NngF6QC0%2FX0dE%2BfjQfk79Zh7PMIa6c6OZbsS7u0ZJrPqWgjmaG%2F6LfzNW474nb%2BLfspLoMTEdb; wckRP=307698365; wckRPImage=https://product-image.wconcept.co.kr/productimg/image/img9/65/307698365_GG10848.jpg; _fwb=199F3oZQq840ljKAmhdGDZU.1768735386093; wck-keyword-autosave=Y; _BS_GUUID=VZPsHF0aOCLaH96Ps66T5rGHzfciTHSOGIgonhyb; _gid=GA1.3.805572859.1768735387; _gcl_aw=GCL.1768735395.Cj0KCQiAprLLBhCMARIsAEDhdPeEsiVVy3CGuyQHJQtxJz6wRwXIfwYPVWuXeeLkTtPILa639DpNKwoaAkqoEALw_wcB; _dd_s=; WCKSessionID=CfDJ8Kwm-N6mTIJKoRK0f9xD4Uclo_r2icelNZ5FLk4A-wuTXiCqMw9bi0XYExJQJ9hP1qpIXYlbbpoyRNYUAvMFEUoW9mP3yOXF2OSBPGwrDBoQaz3wctK6oXpaDEruRr0RgQ; adfrom=baro_0; OpIdxNum=10048; OrderRoute=R00000001; ab.storage.deviceId.65fe4688-7456-4173-99bd-7715541b6e88=%7B%22g%22%3A%22edeb9dd0-a81c-04c7-add4-63d0cd215f91%22%2C%22c%22%3A1768735237293%2C%22l%22%3A1768739837884%7D; ab.storage.sessionId.65fe4688-7456-4173-99bd-7715541b6e88=%7B%22g%22%3A%22978c831e-b5ed-9d17-3731-fe2abab52c70%22%2C%22e%22%3A1768741637889%2C%22c%22%3A1768739837883%2C%22l%22%3A1768739837889%7D; wcs_bt=a428fb7ae4aa78:1768739838|s_15f31f60a89e:1768739837; AWSALB=WWTrTqUd1KcQk1F9eb9eFzoFa5Vw3UBvwtPo+08wCJWOJ/wvyUTPbUjKKgKSVpW1z7qtVKFnz1/pN7Ce+Y27Gg1LJmvt3jj2X8AjQgEaH2/Pm0R9LZJJZ8SDmeIA; AWSALBCORS=WWTrTqUd1KcQk1F9eb9eFzoFa5Vw3UBvwtPo+08wCJWOJ/wvyUTPbUjKKgKSVpW1z7qtVKFnz1/pN7Ce+Y27Gg1LJmvt3jj2X8AjQgEaH2/Pm0R9LZJJZ8SDmeIA; _TRK_AUIDA_13816=813cd415f9c0170c0e71d0a0e024546a:2; _TRK_ASID_13816=35c896d4368c4a2ab046e722a5f3e180; _dc_gtm_UA-60389187-1=1; _gat_UA-60389187-1=1; airbridge_session__wconcept=%7B%22id%22%3A%22e4bc2908-32ae-47c0-a00c-4b04f34bb48f%22%2C%22timeout%22%3A1800000%2C%22start%22%3A1768739839572%2C%22end%22%3A1768739839634%7D; _ga=GA1.3.712953429.1768735196; _ga_Y8Q5KT4ZWS=GS2.1.s1768739836$o2$g1$t1768739842$j54$l0$h0; _ga_SHT495PT17=GS2.3.s1768739838$o2$g1$t1768739857$j41$l0$h0
priority
u=0, i
referer
https://display.wconcept.co.kr/
sec-ch-ua
"Google Chrome";v="143", "Chromium";v="143", "Not A(Brand";v="24"
sec-ch-ua-mobile
?0
sec-ch-ua-platform
"Windows"
sec-fetch-dest
document
sec-fetch-mode
navigate
sec-fetch-site
same-site
sec-fetch-user
?1
upgrade-insecure-requests
1
user-agent
Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36


### response html 예시
wconcept_product_detail.html 


### response html 중 이미지 예시
<div class="gallery_wrap">
                            <ul id="gallery" style="max-width:525px">
                                <li>
                                        <a href="#" data-image="//product-image.wconcept.co.kr/productimg/image/img0/65/307698365_GG10848.jpg" data-zoom-image="//product-image.wconcept.co.kr/productimg/image/img9/65/307698365_GG10848.jpg" class="">
                                            <img id="img_01" src="//product-image.wconcept.co.kr/productimg/image/img0/65/307698365_GG10848.jpg" width="60" height="80" alt="25FW 보테가베네타 WALLACE 윌리스 미니 숄더백 754443V3IV18425 BLACK DOM">
                                        </a>
                                </li>
                                            <li>
                                                    <a href="#" data-image="//product-image.wconcept.co.kr/productimg/image/img0/65/307698365_add1_GG15743.jpg" data-zoom-image="//product-image.wconcept.co.kr/productimg/image/img9/65/307698365_add1_GG15743.jpg" class="">
                                                        <img id="img_01" src="//product-image.wconcept.co.kr/productimg/image/img0/65/307698365_add1_GG15743.jpg?thumbnail=60x80" width="60" height="80" alt="25FW 보테가베네타 WALLACE 윌리스 미니 숄더백 754443V3IV18425 BLACK DOM">
                                                    </a>
                                            </li>
                                            <li>
                                                    <a href="#" data-image="//product-image.wconcept.co.kr/productimg/image/img0/65/307698365_add2_KJ19257.jpg" data-zoom-image="//product-image.wconcept.co.kr/productimg/image/img9/65/307698365_add2_KJ19257.jpg" class="active">
                                                        <img id="img_01" src="//product-image.wconcept.co.kr/productimg/image/img0/65/307698365_add2_KJ19257.jpg?thumbnail=60x80" width="60" height="80" alt="25FW 보테가베네타 WALLACE 윌리스 미니 숄더백 754443V3IV18425 BLACK DOM">
                                                    </a>
                                            </li>
                                            <li>
                                                    <a href="#" data-image="//product-image.wconcept.co.kr/productimg/image/img0/65/307698365_add3_KJ19257.jpg" data-zoom-image="//product-image.wconcept.co.kr/productimg/image/img9/65/307698365_add3_KJ19257.jpg">
                                                        <img id="img_01" src="//product-image.wconcept.co.kr/productimg/image/img0/65/307698365_add3_KJ19257.jpg?thumbnail=60x80" width="60" height="80" alt="25FW 보테가베네타 WALLACE 윌리스 미니 숄더백 754443V3IV18425 BLACK DOM">
                                                    </a>
                                            </li>
                                            <li>
                                                    <a href="#" data-image="//product-image.wconcept.co.kr/productimg/image/img0/65/307698365_add4_GG11551.jpg" data-zoom-image="//product-image.wconcept.co.kr/productimg/image/img9/65/307698365_add4_GG11551.jpg">
                                                        <img id="img_01" src="//product-image.wconcept.co.kr/productimg/image/img0/65/307698365_add4_GG11551.jpg?thumbnail=60x80" width="60" height="80" alt="25FW 보테가베네타 WALLACE 윌리스 미니 숄더백 754443V3IV18425 BLACK DOM">
                                                    </a>
                                            </li>
                            </ul>
                            <!-- 20170912 video play button -->
                            <!-- // 20170912 video play button -->
                        </div>


---

## 이슈 해결 기록

### 검색 결과 1개일 때 추천 상품까지 수집되는 문제 (2026-01-27)

**문제 현상:**
- 검색 결과가 2개 이상인 경우: 정상
- 검색 결과가 없는 경우: 정상
- 검색 결과가 1개인 경우: "이 상품을 찾으셨나요?" 추천 상품까지 수집됨

**원인 분석:**
W컨셉 검색 페이지의 HTML 구조:
```html
<!-- 실제 검색 결과 영역 -->
<div class="sc-1v9lvl2-0 kkERjW product-list">
    <div class="sc-pieeex-0 jNgOLy items-grid list">
        <div class="sc-jpuob9-8 iMBqZp product-item item type-all">
        ...
        </div>
    </div>
</div>

<!-- "이 상품을 찾으셨나요?" 추천 영역 -->
<div class="sc-l8ky0t-0 jiYAqI box area-rec-title">
    <h3 class="sc-ixpkst-0 ffPCFB title">
        <span class="sc-tdjdw3-0 cra-dzL text">이 상품을 찾으셨나요?</span>
    </h3>
</div>
<div class="sc-1v9lvl2-0 kkERjW product-list area-rec-prd-list">
    <div class="sc-pieeex-0 jNgOLy items-grid list">
        <div class="sc-jpuob9-8 iMBqZp product-item item type-simple">
        ...
        </div>
    </div>
</div>
```

**핵심 차이점:**
- 실제 검색 결과: `product-list` 클래스만 있음
- 추천 상품 영역: `product-list area-rec-prd-list` 클래스 (area-rec-prd-list 추가됨)

**해결 방법:**
1. `.product-list:not(.area-rec-prd-list)` 셀렉터로 추천 영역 제외
2. 해당 영역 내에서만 `.product-item` 검색

---

# cloudflare R2 에 이미지 저장하기
- ace_product_images 테이블에 저장된 데이터를 기반으로 이미지를 다운로드 후 cloudeflare R2  저장소에 이미지를 저장하고 원블록스 http 이미지 url을 확보한 후 ace_product_images 테이블에 업데이트한다. 